<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFlow SocialScale Platform</title>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background-color: #1a1a1a;
            color: white;
            padding: 20px;
            min-height: 100vh;
        }
        .header {
            color: #ffd700;
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .card {
            background-color: #222;
            padding: 24px;
            border-radius: 12px;
            border: 1px solid #333;
            margin-bottom: 20px;
        }
        .card h2 {
            color: #ffd700;
            font-size: 18px;
            margin-bottom: 16px;
            margin-top: 0;
        }
        .status-item {
            margin-bottom: 8px;
        }
        .btn {
            background-color: #ffd700;
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 16px;
        }
        .btn:hover {
            background-color: #e6c200;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <h1 class="header">üéâ SocialScale Platform - Now Live!</h1>
    
    <div class="grid">
        <div class="card">
            <h2>System Status</h2>
            <div class="status-item">‚úÖ Flask Admin: Running on port 5000</div>
            <div class="status-item">‚úÖ TypeScript API: Running on port 8787</div>
            <div class="status-item">‚úÖ React Interface: Running on port 5173</div>
            <div class="status-item">‚úÖ Database: SQLite with seeded data</div>
        </div>
        
        <div class="card">
            <h2>Connected Accounts</h2>
            <div id="accounts-list">Loading accounts...</div>
        </div>
    </div>
    
    <div class="card">
        <h2>SocialScale Features</h2>
        <p>You now have a complete social media management platform with:</p>
        <ul>
            <li><strong>AI Post Generation</strong> - Create engaging content with topics</li>
            <li><strong>Multi-Platform Support</strong> - X (Twitter), LinkedIn, Instagram</li>
            <li><strong>Smart Scheduling</strong> - Queue posts for optimal engagement</li>
            <li><strong>Real-time Analytics</strong> - Track performance and engagement</li>
            <li><strong>Template System</strong> - Reuse successful post formats</li>
        </ul>
        
        <button class="btn" onclick="testApiConnection()">Test API Connection</button>
        <button class="btn" onclick="generateTestPost()" style="margin-left: 10px;">Generate Sample Post</button>
    </div>

    <script>
        // Test API connectivity and load accounts
        async function loadAccounts() {
            try {
                const response = await fetch('http://localhost:8787/api/accounts');
                const data = await response.json();
                
                if (data.ok && data.data.length > 0) {
                    const accountsHtml = data.data.map(account => 
                        `<div style="background: #333; padding: 8px; border-radius: 6px; margin-bottom: 8px;">
                            <strong>${account.handle}</strong> 
                            <span style="background: ${account.platform === 'x' ? '#1DA1F2' : '#0A66C2'}; 
                                         color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">
                                ${account.platform.toUpperCase()}
                            </span>
                         </div>`
                    ).join('');
                    document.getElementById('accounts-list').innerHTML = accountsHtml;
                } else {
                    document.getElementById('accounts-list').innerHTML = 
                        '<p style="color: #888;">No accounts connected yet</p>';
                }
            } catch (error) {
                document.getElementById('accounts-list').innerHTML = 
                    '<p style="color: #ff6b6b;">Error loading accounts</p>';
            }
        }

        async function testApiConnection() {
            try {
                const response = await fetch('http://localhost:8787/api/health');
                const data = await response.json();
                alert(data.ok ? '‚úÖ API Connection Successful!' : '‚ùå API Error');
            } catch (error) {
                alert('‚ùå API Connection Failed');
            }
        }

        async function generateTestPost() {
            try {
                const response = await fetch('http://localhost:8787/api/generate_posts', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ topic: 'AI and social media', platform: 'x', count: 1 })
                });
                const data = await response.json();
                
                if (data.ok && data.data.length > 0) {
                    alert('‚úÖ Generated Post: ' + data.data[0].text);
                } else {
                    alert('‚ùå Failed to generate post');
                }
            } catch (error) {
                alert('‚ùå Error generating post');
            }
        }

        // Load accounts on page load
        loadAccounts();
    </script>
</body>
</html>